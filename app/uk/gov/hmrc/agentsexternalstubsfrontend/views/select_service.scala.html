@*
 * Copyright 2026 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.agentsexternalstubsfrontend.views.html.main_template
@import uk.gov.hmrc.govukfrontend.views.html.components.FormWithCSRF
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukSelect
@import uk.gov.hmrc.govukfrontend.views.viewmodels.select.Select
@import uk.gov.hmrc.govukfrontend.views.viewmodels.label.Label
@import uk.gov.hmrc.govukfrontend.views.viewmodels.content.Text
@import uk.gov.hmrc.govukfrontend.views.viewmodels.select.SelectItem
@import uk.gov.hmrc.govukfrontend.views.Implicits.RichSelect
@import uk.gov.hmrc.agentsexternalstubsfrontend.controllers.routes
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukButton
@import uk.gov.hmrc.govukfrontend.views.viewmodels.button.Button
@import uk.gov.hmrc.agentsexternalstubsfrontend.models.AsaService
@import uk.gov.hmrc.agentsexternalstubsfrontend.controllers.routes

@this(
        mainTemplate: main_template,
        formWithCSRF: FormWithCSRF,
        govukSelect: GovukSelect,
        govukButton: GovukButton
)

@(asaServiceForm: Form[AsaService], selectOptions: Seq[AsaService], journey: String)(implicit request: Request[_], msgs: Messages)

@mainTemplate(title = msgs(s"select-service.title,${msgs(s"journey-setup.$journey")}"), showSignOut = false,
    backLinkHref = Some(routes.AsaJourneySetupController.selectJourney().url)) {

    <h1 class="govuk-heading-xl">@msgs(s"select-service.title",s"${msgs(s"journey-setup.$journey")}")</h1>

    @formWithCSRF(action = routes.AsaJourneySetupController.submitSelectService) {

        @govukSelect(Select(
            label = Label(
                content = Text(msgs("select-service.label")),
                classes = Seq("govuk-label", "govuk-label--m", if(asaServiceForm.hasErrors) "error" else "").mkString(" ")
            ),
            attributes = Map("id" -> "service-select", "name" -> "service-select"),
            items = selectOptions.map(option =>
                SelectItem(
                    text = option.friendlyName,
                    value = Some(option.id),
                    attributes = Map(
                        "id" -> s"${option.id}"
                    )
                )
            )
        ).withFormField(asaServiceForm("service")))

    @govukButton(Button(
        id = Some("continueButton"),
        content = Text(msgs("continue.button")),
        preventDoubleClick = Some(true)
    ))
}
}