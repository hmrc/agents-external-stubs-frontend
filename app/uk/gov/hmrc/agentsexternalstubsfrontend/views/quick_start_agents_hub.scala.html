@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.agentsexternalstubsfrontend.controllers.routes
@import uk.gov.hmrc.agentsexternalstubsfrontend.models.PageContext
@import uk.gov.hmrc.agentsexternalstubsfrontend.views.html.components._
@import uk.gov.hmrc.agentsexternalstubsfrontend.views.html.{main_template, navigationBar}

@this(
    mainTemplate: main_template,
    navigationBar: navigationBar,
    a: a
)

@(quickStartHubBaseUrl: Option[String], quickStartHubStrideBaseUrl: Option[String], context: PageContext, isDev: Boolean = true)(implicit request: Request[_], msgs: Messages)

@baseUrl = @{ if(isDev) request.host else request.uri }

<!--TODO: CORRECT LINK VALUES FOR STAGING-->

@linkBaseUrl = @{ quickStartHubBaseUrl.getOrElse("http://localhost:9553") }

@strideLinkBaseUrl = @{ quickStartHubStrideBaseUrl.getOrElse("http://localhost:9041") }

@agentSubscriptionStartLink = @{ s"$linkBaseUrl/bas-gateway/sign-in?continue_url=${ quickStartHubBaseUrl.getOrElse("http://localhost:9437") }/agent-subscription/task-list" }

@agentOverseasSubStartLink = @{ s"$linkBaseUrl/bas-gateway/sign-in?continue_url=${ quickStartHubBaseUrl.getOrElse("http://localhost:9414") }/agent-services/apply-from-outside-uk&origin=agent-overseas-frontend" }

@agentServicesAccountHomeLink = @{ s"$linkBaseUrl/bas-gateway/sign-in?continue_url=${ quickStartHubBaseUrl.getOrElse("http://localhost:9401") }/agent-services-account/home&origin=agent-services-account-frontend" }

@manageYourTaxAgentsLink = @{ s"$linkBaseUrl/bas-gateway/sign-in?continue_url=${ quickStartHubBaseUrl.getOrElse("http://localhost:9435") }/agent-client-relationships/manage-your-tax-agents" }

@digitallyExcludedRelationshipsStrideLink = @{ s"$strideLinkBaseUrl/stride/sign-in?successURL=${ quickStartHubStrideBaseUrl.getOrElse("http%3A%2F%2Flocalhost%3A9451") }%2Fmanage-agent-authorisation%2Fstart&origin=agent-helpdesk-frontend" }

@reviewOverseasApplicationsStrideLink = @{ s"$strideLinkBaseUrl/stride/sign-in?successURL=${ quickStartHubStrideBaseUrl.getOrElse("http%3A%2F%2Flocalhost%3A9451") }%2Fagent-services%2Fcheck-application%2Fsearch-applications&origin=agent-helpdesk-frontend" }

@agentManuallyAssuredListStrideLink = @{ s"$strideLinkBaseUrl/stride/sign-in?successURL=${ quickStartHubStrideBaseUrl.getOrElse("http%3A%2F%2Flocalhost%3A9451") }%2Fagent-assurance%2Fagent-lists&origin=agent-helpdesk-frontend" }

@altItsaStrideLink = @{ s"$strideLinkBaseUrl/stride/sign-in?successURL=${ quickStartHubStrideBaseUrl.getOrElse("http%3A%2F%2Flocalhost%3A9451") }%2Fcheck-itsa-partial-agent-authorisation&origin=agent-helpdesk-frontend" }

@* don't need to be signed in to view this page *@
@mainTemplate(title = "Quick start hub - Agents team", wide = true, showSignOut = false) {

@navigationBar(context)

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-l">Quick start hub</h1>

        <p class="govuk-body">Intended as a shortcut to the start of ASA journeys, must sign in with appropriate user type.</p>
        <p class="govuk-body">
            @a(
                key = "See all existing users (opens in a new tab)",
                href =  routes.UserController.showAllUsersPage.url,
                openInNewWindow = true
            )
        </p>
    </div>
</div>


<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
    <h2 class="govuk-heading-m">As agent</h2>
    </div>
    <div class="govuk-grid-column-one-third">
    <p class="govuk-body govuk-body govuk-!-margin-bottom-0">primary enrolment is <strong>None</strong></p>
    <ul class="govuk-list govuk-list--bullet govuk-list--spaced">
        <li>
            @a(key = "Agent subscription start", href = agentSubscriptionStartLink)
        </li>
        <li>
            @a(key = "Agent overseas sub start", href = agentOverseasSubStartLink)
        </li>
    </ul>
    </div>

    <div class="govuk-grid-column-one-half">
        <p class="govuk-body govuk-body govuk-!-margin-bottom-0">HMRC-AS-AGENT enrolment </p>
        @a(key = "Agent services account home", href = agentServicesAccountHomeLink)
    </div>
    @* keep it small to start? ASA home lets you navigate to mapping/invitations
    @a(key = "Mapping", href = routes.UserController.showAllUsersPage.url)

    @a(key = "Invitations", href = routes.UserController.showAllUsersPage.url)
    *@
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <br>
    <h2 class="govuk-heading-m">As client (individual/org)</h2>
    <p class="govuk-body govuk-!-margin-bottom-0">If not using the agent invitation link... </p>
    @a(key = "Manage your tax agents (agent-client-relationships)", href = manageYourTaxAgentsLink)
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <br>
    <h2 class="govuk-heading-m">As hmrc helpdesk staff (affinity type None with STRIDE)</h2>
    </div>
    <div class="govuk-grid-column-one-third">
     <p class="govuk-body govuk-!-margin-bottom-1">stride role 'maintain_agent_relationships'</p>
     @a(key = "Digitally excluded authorisations", href = digitallyExcludedRelationshipsStrideLink)
    </div>
    <div class="govuk-grid-column-one-third">
     <p class="govuk-body govuk-!-margin-bottom-1">stride role 'maintain_agent_overseas'</p>
     @a(key = "Review overseas applications", href = reviewOverseasApplicationsStrideLink)
    </div>
    <div class="govuk-grid-column-one-third">
     <p class="govuk-body govuk-!-margin-bottom-1">stride role 'maintain_agent_manually_assure'</p>
     @a(key = "Agent manually assured list - AMLS", href = agentManuallyAssuredListStrideLink)
    </div>
    <div class="govuk-grid-column-full govuk-!-margin-top-5">
     <p class="govuk-body govuk-!-margin-bottom-1">stride roles 'maintain_agent_manually_assure, maintain_agent_relationships'</p>
     @a(key = "Alt itsa screen", href = altItsaStrideLink)
    </div>
</div>

}
